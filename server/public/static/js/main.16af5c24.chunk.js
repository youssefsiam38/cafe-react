(this["webpackJsonpcafe-react"]=this["webpackJsonpcafe-react"]||[]).push([[0],{21:function(e,t){e.exports={GRAPHQL_URL:"http://localhost:3000/graphql",IMAGE_UPLOAD_ROUTE:"http://localhost:3000/image"}},34:function(e,t,n){},43:function(e,t,n){e.exports=n(57)},57:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(38),l=n.n(o),c=(n(34),n(15)),i=n(5),m=n(18),u=n(8),d=n(21),s=n.n(d),p=function(){var e=Object(i.f)();return r.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 place-items-stretch place-content-center my-8"},r.a.createElement("h2",{className:"text-3xl place-self-center md:place-self-start my-auto",style:{color:"#43425D"}},"Menu"),r.a.createElement("button",{className:" place-self-end hidden md:block rounded-md h-12 my-4 w-1/2 text-white bg-blue-500 hover:bg-blue-600",onClick:function(){e.push("/add")}},"Add menu item"))},b=n(22),h=n(23);function f(){var e=Object(h.a)(["\n  mutation($id: ID!) {\n    deleteMenuItem(id: $id){\n      id\n    }\n  }\n"]);return f=function(){return e},e}function g(){var e=Object(h.a)(["\n  mutation($id: ID!, $name: String!, $type: String!, $price: String!, $description: String!, $photoURL: String!) {\n    editMenuItem(id: $id, name: $name, type: $type, price: $price, description: $description, photoURL: $photoURL){\n      id\n      name\n      type\n      price\n      description\n      photoURL\n    }\n  }\n"]);return g=function(){return e},e}function E(){var e=Object(h.a)(["\n  mutation($name: String!, $type: String!, $price: String!, $description: String!, $photoURL: String!) {\n    addMenuItem(name: $name, type: $type, price: $price, description: $description, photoURL: $photoURL){\n      name\n      id\n    }\n  }\n"]);return E=function(){return e},e}function v(){var e=Object(h.a)(["\n    query($id: ID){\n        menuItem(id: $id){\n            id\n            name\n            type\n            price\n            description\n            photoURL\n        }\n    }\n"]);return v=function(){return e},e}function y(){var e=Object(h.a)(["\n    query {\n        menuItems{\n            id\n            name\n            type\n            price\n            photoURL\n        }\n    }\n"]);return y=function(){return e},e}var w=Object(m.b)(y()),x=Object(m.b)(v()),N=Object(m.b)(E()),O=Object(m.b)(g()),j=Object(m.b)(f()),I=Object(u.b)(Object(u.c)(j,{name:"deleteMenuItemMutation"}))((function(e){var t=Object(i.f)();return r.a.createElement("div",{className:"max-w-sm rounded overflow-hidden shadow-lg bg-white hover:bg-gray-200 cursor-pointer",onClick:function(){t.push("/".concat(e.id))}},r.a.createElement("img",{className:"w-full h-64",src:e.photoURL,alt:"Sunset in the mountains"}),r.a.createElement("div",{className:"px-6 py-4",style:{color:"#888A94"}},r.a.createElement("p",{className:"text-gray-700 text-base inline-block cursor-text",style:{color:"#888A94"}},e.type.toUpperCase()),r.a.createElement("br",null),r.a.createElement("span",{className:"float-right text-lg font-bold cursor-text "},"$",e.price),r.a.createElement("div",{className:"font-bold text-2xl mb-2 inline-block cursor-text",style:{color:"#43425D"}},e.name),r.a.createElement("div",{className:"grid grid-cols-2 place-items-stretch gap-6"},r.a.createElement("button",{className:"bg-green-400 hover:bg-green-600 rounded-md text-white h-8",onClick:function(n){n||(n=window.event),n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation(),t.push("/edit/".concat(e.id))}},"Edit"),r.a.createElement("button",{className:"bg-red-600 hover:bg-red-700 rounded-md text-white h-8",onClick:function(t){t||(t=window.event),t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation(),e.deleteMenuItemMutation({variables:{id:e.id}}).then((function(t){e.reRender(t.data.deleteMenuItem.id)})).catch((function(e){alert("somthing went wrong with deletion")}))}},"Delete"))))})),k=function(){return r.a.createElement("div",{className:"text-4xl text-center"},"Loading..")},C=Object(u.c)(w)((function(e){var t=Object(i.f)(),n=Object(a.useState)([]),o=Object(b.a)(n,2),l=o[0],c=o[1];if(Object(a.useEffect)((function(){e.data.loading||(t.location.search.includes("deleted=")&&e.data.refetch(),c(e.data.menuItems))}),[e]),e.data.loading)return r.a.createElement(k,null);var m=function(e){var t=l.filter((function(t){return t.id!=e}));c(t)};return r.a.createElement("div",{className:" place-items-center md:place-items-stretch grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 "},l.map((function(e){return r.a.createElement(I,{key:e.id,id:e.id,name:e.name,price:e.price,type:e.type,photoURL:e.photoURL,reRender:m})})))})),M=function(e){return r.a.createElement("div",{className:" container mx-auto"},r.a.createElement(p,null),r.a.createElement(C,null))},D=function(e){var t=Object(i.f)();return r.a.createElement("header",{className:" w-full bg-white h-16 shadow-lg grid grid-cols-3 place-content-around place-items-stretch"},r.a.createElement("p",{className:"font-bold grid grid-cols-1 place-content-center text-left  ml-4 font-sans text-center cursor-pointer",style:{color:"#43425D",letterSpacing:"6px"},onClick:function(e){t.push("/")}},"CAFE REACT"),"/"==window.location.pathname?r.a.createElement("button",{className:"block md:hidden float-right rounded-md h-12 my-4 col-start-3 text-white mr-4 bg-blue-500 hover:bg-blue-600",onClick:function(e){t.push("/add")}},"Add menu item"):"")},R=Object(u.b)(Object(u.c)(x,{options:function(e){return{variables:{id:e.match.params.id}}}}),Object(u.c)(j,{name:"deleteMenuItemMutation"}))((function(e){var t=Object(i.f)(),n=(e.match.params.id,e.data.menuItem);if(e.data.loading)return r.a.createElement(k,null);return r.a.createElement("div",{className:"py-24 px-4 md:px-24 grid grid-cols-1 md:grid-cols-2"},r.a.createElement("img",{className:"border-4 mx-auto",style:{borderColor:"#43425D",height:440},src:n.photoURL}),r.a.createElement("div",null,r.a.createElement("div",{className:"px-6 py-4",style:{color:"#888A94"}},r.a.createElement("p",{className:"text-gray-700 text-base inline-block cursor-text mb-8",style:{color:"#888A94"}},n.type.toUpperCase()),r.a.createElement("br",null),r.a.createElement("span",{className:"float-right text-lg font-bold cursor-text "},"$",n.price),r.a.createElement("div",{className:"font-bold text-xl mb-8 inline-block cursor-text",style:{color:"#43425D"}},n.name),r.a.createElement("br",null),r.a.createElement("label",null,"Description: "),r.a.createElement("div",{id:"desc",className:"my-auto mb-24"},r.a.createElement("p",{className:"mt-4",style:{color:"#43425D"}},n.description)),r.a.createElement("div",{className:"grid grid-cols-2 place-items-stretch gap-6"},r.a.createElement("button",{className:"bg-green-400 hover:bg-green-600 rounded-md text-white h-8",onClick:function(e){e||(e=window.event),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),t.push("/edit/".concat(n.id))}},"Edit"),r.a.createElement("button",{className:"bg-red-600 hover:bg-red-700 rounded-md text-white h-8",onClick:function(a){a||(a=window.event),a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation(),e.deleteMenuItemMutation({variables:{id:n.id}}).then((function(e){t.push("/?deleted=true")})).catch((function(e){alert("somthing went wrong with deletion")}))}},"Delete")))))})),U=n(9),L=Object(u.b)(Object(u.c)(x,{options:function(){var e=window.location.pathname.split("/")[2];return console.log(e),{variables:{id:e}}},name:"getMenuItemQuery"}),Object(u.c)(O,{name:"editMenuItemMutation"}))((function(e){var t=Object(i.f)(),n=Object(a.useState)({name:"",type:"",price:"",description:"",photoURL:""}),o=Object(b.a)(n,2),l=o[0],c=o[1];if(Object(a.useEffect)((function(){e.getMenuItemQuery.loading||c({name:e.getMenuItemQuery.menuItem.name,type:e.getMenuItemQuery.menuItem.type,price:e.getMenuItemQuery.menuItem.price,description:e.getMenuItemQuery.menuItem.description,photoURL:e.getMenuItemQuery.menuItem.photoURL})}),[e]),Object(a.useEffect)((function(){console.log(l)}),[l]),e.getMenuItemQuery.loading)return r.a.createElement(k,null);return r.a.createElement("div",{className:"container mx-auto"},r.a.createElement("h2",{className:"text-center text-3xl py-12",style:{color:"#43425D",letterSpacing:"2px"}},"Edit Menu Item"),r.a.createElement("div",{className:"px-2"},r.a.createElement("form",{className:"container grid rows-5 gap-5 w-full max-w-lg mx-auto pb-12",id:"form",onSubmit:function(n){n.preventDefault(),e.editMenuItemMutation({variables:{id:e.getMenuItemQuery.menuItem.id,name:l.name,type:l.type,price:l.price,description:l.description,photoURL:l.photoURL}}).then((function(n){(function(e){var t=document.getElementById("form-photo"),n=new FormData;return n.append("image",t.files[0]),fetch(d.IMAGE_UPLOAD_ROUTE+"?id=".concat(e),{body:n,method:"POST"})})(e.getMenuItemQuery.menuItem.id).then((function(e){200==e.status&&t.push("/".concat(n.data.editMenuItem.id))}))})).catch((function(e){console.log(e)}))},method:"GET"},r.a.createElement("div",null,r.a.createElement("label",{className:"inline-block w-1/3 mt-3",htmlFor:"form-type",style:{color:"#43425D"}},"Type: "),r.a.createElement("select",{id:"form-type",className:"inline-block border-2 rounded p-2 w-4/6 h-12 float-right",style:{borderColor:"#AFB1BC"},value:l.type,required:!0,onChange:function(e){c(Object(U.a)(Object(U.a)({},l),{},{type:e.target.value}))}},r.a.createElement("option",{value:"Main Course"},"Main Course"),r.a.createElement("option",{value:"Hot Drink"}," Hot Drink"),r.a.createElement("option",{value:"Cold Drink"},"Cold Drink"),r.a.createElement("option",{value:"appetizers"},"appetizers"))),r.a.createElement("div",null,r.a.createElement("label",{className:"inline-block w-1/3 mt-3",htmlFor:"form-name",style:{color:"#43425D"}},"Name: "),r.a.createElement("input",{id:"form-name",className:"inline-block border-2 rounded p-2 w-4/6 h-12 float-right",style:{borderColor:"#AFB1BC"},value:l.name,required:!0,onChange:function(e){c(Object(U.a)(Object(U.a)({},l),{},{name:e.target.value}))}})),r.a.createElement("div",null,r.a.createElement("label",{className:"inline-block w-1/3 mt-3",htmlFor:"form-price",style:{color:"#43425D"}},"Price: "),r.a.createElement("input",{id:"form-price",className:"inline-block border-2 rounded p-2 w-4/6 h-12 float-right",style:{borderColor:"#AFB1BC"},type:"number",value:l.price,required:!0,onChange:function(e){c(Object(U.a)(Object(U.a)({},l),{},{price:e.target.value}))}})),r.a.createElement("div",null,r.a.createElement("label",{className:"inline-block w-1/3 mt-3",htmlFor:"form-desc",style:{color:"#43425D"}},"Description: "),r.a.createElement("textarea",{id:"form-desc",className:"h-40 inline-block border-2 rounded p-2 w-4/6 h-12 float-right",style:{borderColor:"#AFB1BC"},value:l.description,required:!0,onChange:function(e){c(Object(U.a)(Object(U.a)({},l),{},{description:e.target.value}))}})),r.a.createElement("div",null,r.a.createElement("label",{className:"inline-block w-1/3 mt-3",htmlFor:"form-photo",style:{color:"#43425D"}},"Photo: "),r.a.createElement("input",{id:"form-photo",type:"file",className:"inline-block p-2 w-4/6 h-12 float-right",required:!0})),r.a.createElement("input",{className:"w-full bg-blue-500 hover:bg-blue-600 h-12 rounded-md text-white",type:"submit",value:"Save Item"}))))})),$=Object(u.b)(Object(u.c)(N,{name:"addMenuItemMutation"}))((function(e){var t=Object(i.f)(),n=Object(a.useState)({name:"",type:"",price:"",description:"",photoURL:""}),o=Object(b.a)(n,2),l=o[0],c=o[1];return r.a.createElement("div",{className:"container mx-auto"},r.a.createElement("h2",{className:"text-center text-3xl py-12",style:{color:"#43425D",letterSpacing:"2px"}},"Add Menu Item"),r.a.createElement("div",{className:"px-2"},r.a.createElement("form",{className:"container grid rows-5 gap-5 w-full max-w-lg mx-auto pb-12",onSubmit:function(n){n.preventDefault(),e.addMenuItemMutation({variables:{name:l.name,type:l.type,price:l.price,description:l.description,photoURL:l.photoURL}}).then((function(e){(function(e){var t=document.getElementById("form-photo"),n=new FormData;return n.append("image",t.files[0]),fetch(d.IMAGE_UPLOAD_ROUTE+"?id=".concat(e),{body:n,method:"POST"})})(e.data.addMenuItem.id).then((function(n){200==n.status&&t.push("/".concat(e.data.addMenuItem.id))}))})).catch((function(e){console.log(e)}))},method:"GET"},r.a.createElement("div",null,r.a.createElement("label",{className:"inline-block w-1/3 mt-3",htmlFor:"form-type",style:{color:"#43425D"}},"Type: "),r.a.createElement("select",{id:"form-type",className:"inline-block border-2 rounded p-2 w-4/6 h-12 float-right",style:{borderColor:"#AFB1BC"},value:l.type,required:!0,onChange:function(e){c(Object(U.a)(Object(U.a)({},l),{},{type:e.target.value}))}},r.a.createElement("option",{value:"Main Course"},"Main Course"),r.a.createElement("option",{value:"Hot Drink"}," Hot Drink"),r.a.createElement("option",{value:"Cold Drink"},"Cold Drink"),r.a.createElement("option",{value:"appetizers"},"appetizers"))),r.a.createElement("div",null,r.a.createElement("label",{className:"inline-block w-1/3 mt-3",htmlFor:"form-name",style:{color:"#43425D"}},"Name: "),r.a.createElement("input",{id:"form-name",className:"inline-block border-2 rounded p-2 w-4/6 h-12 float-right",style:{borderColor:"#AFB1BC"},value:l.name,required:!0,onChange:function(e){c(Object(U.a)(Object(U.a)({},l),{},{name:e.target.value}))}})),r.a.createElement("div",null,r.a.createElement("label",{className:"inline-block w-1/3 mt-3",htmlFor:"form-price",style:{color:"#43425D"}},"Price: "),r.a.createElement("input",{id:"form-price",className:"inline-block border-2 rounded p-2 w-4/6 h-12 float-right",style:{borderColor:"#AFB1BC"},type:"number",value:l.price,required:!0,onChange:function(e){c(Object(U.a)(Object(U.a)({},l),{},{price:e.target.value}))}})),r.a.createElement("div",null,r.a.createElement("label",{className:"inline-block w-1/3 mt-3",htmlFor:"form-desc",style:{color:"#43425D"}},"Description: "),r.a.createElement("textarea",{id:"form-desc",className:"h-40 inline-block border-2 rounded p-2 w-4/6 h-12 float-right",style:{borderColor:"#AFB1BC"},value:l.description,required:!0,onChange:function(e){c(Object(U.a)(Object(U.a)({},l),{},{description:e.target.value}))}})),r.a.createElement("div",null,r.a.createElement("label",{className:"inline-block w-1/3 mt-3",htmlFor:"form-photo",style:{color:"#43425D"}},"Photo: "),r.a.createElement("input",{id:"form-photo",required:!0,type:"file",className:"inline-block p-2 w-4/6 h-12 float-right"})),r.a.createElement("input",{className:"w-full bg-blue-500 hover:bg-blue-600 h-12 rounded-md text-white",type:"submit",value:"Save Item"}))))})),A=new m.a({uri:s.a.GRAPHQL_URL});var B=function(){return r.a.createElement(u.a,{client:A},r.a.createElement("div",{className:"bg-gray-300"},r.a.createElement(c.a,null,r.a.createElement(D,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/add",component:$}),r.a.createElement(i.a,{exact:!0,path:"/",component:M}),r.a.createElement(i.a,{exact:!0,path:"/:id",component:R}),r.a.createElement(i.a,{exact:!0,path:"/edit/:id",component:function(){return r.a.createElement(L,null)}})))))};l.a.render(r.a.createElement(B,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.16af5c24.chunk.js.map